'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var fields=['nome','email','telefone'],cvLeads=function(){function a(b,c,d){_classCallCheck(this,a),this.urlCV=b,this.emailCV=c,this.tokenCV=d,this.renderForm(),this.utmHandler()}return _createClass(a,[{key:'renderForm',value:function b(){var a=this;document.querySelector('#cv-lead-form').addEventListener('submit',function(b){b.preventDefault(),!a.validateForm()||a.submitForm(b)})}},{key:'validateForm',value:function d(){var a,b,c=fields.length;for(b=0;b<c;b++)if(a=fields[b],''===document.forms['cv-lead-form'][a].value)return alert('Preencha todos os campos!'),!1;return!0}},{key:'utmHandler',value:function c(){//http://www.example.com/?utm_source=adsite&utm_medium=origem&utm_campaign=campanhadoanuncio&utm_term=palavra-chavedoanuncio
var a=formatOrigin(getParamsURL().utm_source),b=formatMedium(getParamsURL().utm_source,getParamsURL().utm_medium);this.registerLocalStorage(a,b)}},{key:'registerLocalStorage',value:function c(a,b){a&&b&&(localStorage.removeItem('utm_source'),localStorage.removeItem('utm_medium'),localStorage.setItem('utm_source',a),localStorage.setItem('utm_medium',b))}},{key:'submitForm',value:function f(a){a.preventDefault();var b=new FormData(document.getElementById('cv-lead-form')),c={acao:'salvar',permitir_alteracao:'true'};b.forEach(function(a,b){c[b]=a}),localStorage.getItem('utm_source')&&localStorage.getItem('utm_medium')&&(c.origem=localStorage.getItem('utm_source'),c.midia=localStorage.getItem('utm_medium')),c.conversao=document.getElementsByName('conversao')[0].value?document.getElementsByName('conversao')[0].value:c.origem;var d=JSON.stringify(c),e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=JSON.parse(this.responseText);alert(a.sucesso?'Sua mensagem foi enviada com sucesso':'Houve um erro no envio da mensagem.')}},e.open('POST',this.urlCV,!0),e.setRequestHeader('Content-Type','application/json'),e.setRequestHeader('email',this.emailCV),e.setRequestHeader('token',this.tokenCV),e.send(d)}}]),a}();function getParamsURL(){var a=location.search.split('?').join('').split('&'),b={};return a.forEach(function(a){var c=a.split('=');b[c[0]]=c[1]}),b}function formatOrigin(a){return'facebook'===a?'FB':'google'===a?'GO':'bing'===a?'BC':'twitter'===a?'TW':'newsletter'===a?'EM':void 0}function formatMedium(a,b){if(a&&b)return a+'_'+b}var v_obj=void 0,v_fun=void 0;function masc(a,b){v_obj=a,v_fun=b,setTimeout('this.execmasc()',1)}function execmasc(){v_obj.value=v_fun(v_obj.value)}function mtel(a){return a=a.replace(/\D/g,''),a=a.replace(/^(\d{2})(\d)/g,'($1) $2'),a=a.replace(/(\d)(\d{4})$/,'$1-$2'),a}